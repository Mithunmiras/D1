import{r,j as e,Y as k}from"./index-GUJoo2F0.js";import{B as x}from"./index-BZY6JUnr.js";function S(){const[j,C]=r.useState([]),[g,m]=r.useState(!1),[d,f]=r.useState(!0),[a,o]=r.useState({title:"",description:"",category:{name:"",link:""},readMoreLink:"",gradientColors:{start:"",end:""},active:!0}),[i,b]=r.useState(null),h=async()=>{try{const s=d?`?active=${d}`:"",n=await fetch(`${x}/api/blog${s}`);if(!n.ok)throw new Error("Failed to fetch blogs");const p=await n.json();C(p)}catch(s){console.error("Error fetching blogs:",s)}};r.useEffect(()=>{h()},[d]);const v=async s=>{s.preventDefault();try{const n=i?"PUT":"POST",p=i?`${x}/api/blog/${i}`:`${x}/api/blog/create`;if(!(await fetch(p,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to save blog");await h(),m(!1),b(null),c()}catch(n){console.error("Error saving blog:",n)}},c=()=>{o({title:"",description:"",category:{name:"",link:""},readMoreLink:"",gradientColors:{start:"",end:""},active:!0})},u=async s=>{if(window.confirm("Are you sure you want to delete this blog?"))try{if(!(await fetch(`${x}/api/blog/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete blog");await h()}catch(n){console.error("Error deleting blog:",n)}},N=s=>{b(s._id),o(s),m(!0)};return e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Blog List"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{className:"text-gray-600"}),e.jsxs("select",{value:d,onChange:s=>f(s.target.value),className:"border p-2 rounded",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:()=>{c(),b(null),m(!0)},children:"+ Create Blog"})]})]}),e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"p-2 border",children:"Title"}),e.jsx("th",{className:"p-2 border",children:"Category"}),e.jsx("th",{className:"p-2 border",children:"Active"}),e.jsx("th",{className:"p-2 border",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border",children:s.title}),e.jsx("td",{className:"p-2 border",children:s.category?.name}),e.jsx("td",{className:"p-2 border",children:s.active?"Yes":"No"}),e.jsxs("td",{className:"p-2 border",children:[e.jsx("button",{className:"bg-green-500 text-white px-2 py-1 mr-2 rounded",onClick:()=>N(s),children:"Edit"}),e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded",onClick:()=>u(s._id),children:"Delete"})]})]},s._id))})]})]}),g&&e.jsxs("div",{className:"w-1/3 bg-white border-l p-4 fixed right-0 top-0 h-full shadow-lg overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Edit Blog":"Create Blog"}),e.jsxs("form",{onSubmit:v,children:[e.jsx("input",{type:"text",placeholder:"Title",className:"w-full border p-2 mb-2",value:a.title,onChange:s=>o({...a,title:s.target.value}),required:!0}),e.jsx("textarea",{placeholder:"Description",className:"w-full border p-2 mb-2",value:a.description,onChange:s=>o({...a,description:s.target.value}),required:!0}),e.jsx("input",{type:"text",placeholder:"Category Name",className:"w-full border p-2 mb-2",value:a.category.name,onChange:s=>o({...a,category:{...a.category,name:s.target.value}}),required:!0}),e.jsx("input",{type:"text",placeholder:"Category Link",className:"w-full border p-2 mb-2",value:a.category.link,onChange:s=>o({...a,category:{...a.category,link:s.target.value}}),required:!0}),e.jsx("input",{type:"text",placeholder:"Read More Link",className:"w-full border p-2 mb-2",value:a.readMoreLink,onChange:s=>o({...a,readMoreLink:s.target.value}),required:!0}),e.jsx("input",{type:"color",value:a.gradientColors.start,onChange:s=>o({...a,gradientColors:{...a.gradientColors,start:s.target.value}}),className:"w-full p-1 mb-2"}),e.jsx("input",{type:"color",value:a.gradientColors.end,onChange:s=>o({...a,gradientColors:{...a.gradientColors,end:s.target.value}}),className:"w-full p-1 mb-2"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",checked:a.active,onChange:s=>o({...a,active:s.target.checked}),className:"mr-2"}),e.jsx("label",{children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:i?"Update":"Create"}),e.jsx("button",{type:"button",className:"bg-gray-400 text-white px-4 py-2 rounded",onClick:()=>m(!1),children:"Cancel"})]})]})]})]})}const L=()=>{const[j,C]=r.useState([]),[g,m]=r.useState([]),[d,f]=r.useState(!1),[a,o]=r.useState(!1),[i,b]=r.useState(null),[h,v]=r.useState(null),[c,u]=r.useState("consultations"),[N,s]=r.useState([]),[n,p]=r.useState(!1),[w,E]=r.useState(null);return r.useEffect(()=>{(async()=>{p(!0),E(null);try{const l=await fetch(`${x}/api/review/list`);if(!l.ok)throw new Error("Failed to fetch reviews");const y=await l.json();s(y)}catch(l){E(l.message)}finally{p(!1)}})()},[]),r.useEffect(()=>{(async()=>{f(!0),b(null);try{const l=await fetch(`${x}/api/schedule`);if(!l.ok)throw new Error("Failed to fetch consultations");const y=await l.json();C(y)}catch(l){b(l.message)}finally{f(!1)}})()},[]),r.useEffect(()=>{(async()=>{o(!0),v(null);try{const l=await fetch(`${x}/api/contact`);if(!l.ok)throw new Error("Failed to fetch contacts");const y=await l.json();m(y)}catch(l){v(l.message)}finally{o(!1)}})()},[]),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Dashboard"}),e.jsx("div",{className:"mb-8 border-b border-gray-300",children:e.jsxs("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[e.jsx("button",{className:`px-4 py-2 font-medium ${c==="consultations"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-blue-600"}`,onClick:()=>u("consultations"),children:"Consultations"}),e.jsx("button",{className:`px-4 py-2 font-medium ${c==="contacts"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-blue-600"}`,onClick:()=>u("contacts"),children:"Contacts"}),e.jsx("button",{className:`px-4 py-2 font-medium ${c==="blog"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-blue-600"}`,onClick:()=>u("blog"),children:"Blog"}),e.jsx("button",{className:`px-4 py-2 font-medium ${c==="reviews"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-blue-600"}`,onClick:()=>u("reviews"),children:"Reviews"})]})}),c==="consultations"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Scheduled Consultations"}),d&&e.jsx("p",{children:"Loading consultations..."}),i&&e.jsxs("p",{className:"text-red-600",children:["Error: ",i]}),!d&&!i&&j.length===0&&e.jsx("p",{children:"No consultations found."}),j.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 border-b",children:"Name"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Email"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Phone"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Company"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Service"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Message"})]})}),e.jsx("tbody",{children:j.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsxs("td",{className:"py-2 px-4",children:[t.firstName," ",t.lastName]}),e.jsx("td",{className:"py-2 px-4",children:t.email}),e.jsx("td",{className:"py-2 px-4",children:t.phone||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:t.company||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:t.service||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:t.message||"N/A"})]},t._id))})]})})]}),c==="blog"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Blog Management"}),e.jsx(S,{})]}),c==="contacts"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Contact Form Submissions"}),a&&e.jsx("p",{children:"Loading contacts..."}),h&&e.jsxs("p",{className:"text-red-600",children:["Error: ",h]}),!a&&!h&&g.length===0&&e.jsx("p",{children:"No contact submissions found."}),g.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 border-b",children:"Name"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Email"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Subject"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Message"})]})}),e.jsx("tbody",{children:g.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:t.name}),e.jsx("td",{className:"py-2 px-4",children:t.email}),e.jsx("td",{className:"py-2 px-4",children:t.subject||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:t.message})]},t._id))})]})})]}),c==="reviews"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Customer Reviews"}),n&&e.jsx("p",{children:"Loading reviews..."}),w&&e.jsxs("p",{className:"text-red-600",children:["Error: ",w]}),!n&&!w&&N.length===0&&e.jsx("p",{children:"No reviews found."}),N.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"py-3 px-4 border-b",children:"Name"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Email"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Mobile"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Rating"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Comment"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Date"})]})}),e.jsx("tbody",{children:N.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:t.name}),e.jsx("td",{className:"py-2 px-4",children:t.email||"N/A"}),e.jsx("td",{className:"py-2 px-4",children:t.mobileNo||"N/A"}),e.jsxs("td",{className:"py-2 px-4",children:[t.rating," ⭐"]}),e.jsx("td",{className:"py-2 px-4",children:t.comment}),e.jsx("td",{className:"py-2 px-4",children:new Date(t.createdAt*1e3).toLocaleDateString()})]},t._id))})]})})]})]})};export{L as default};
